/*! The MAG Core JavaScript library for utilization within the MAG suite of mapping applications.
 *
 * magcore v0.0.1 (git+https://github.com/AZMAG/map-mag-core-js.git)
 * The MIT License (MIT)

Copyright (c) 2019 Maricopa Association of Governments

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
 */

define("magcore/main",[],function(){return{version:"0.0.1"}}),define("magcore/resources/color-ramps",[],function(){return{sequential:{classBreakSets:{3:"CFI",4:"BEGJ",5:"BEGIK",6:"BDFGIK",7:"BDFGHJL",8:"ACDFGHJL",9:"ACDFGHJKM"},colorRamps:{YlGn:{A:["255","255","229"],B:["255","255","204"],C:["247","252","185"],D:["217","240","163"],E:["194","230","153"],F:["173","221","142"],G:["120","198","121"],H:["65","171","93"],I:["49","163","84"],J:["35","132","67"],K:["0","104","55"],L:["0","90","50"],M:["0","69","41"]},YlGnBu:{A:["255","255","217"],B:["255","255","204"],C:["237","248","177"],D:["199","233","180"],E:["161","218","180"],F:["127","205","187"],G:["65","182","196"],H:["29","145","192"],I:["44","127","184"],J:["34","94","168"],K:["37","52","148"],L:["12","44","132"],M:["8","29","88"]},GnBu:{A:["247","252","240"],B:["240","249","232"],C:["224","243","219"],D:["204","235","197"],E:["186","228","188"],F:["168","221","181"],G:["123","204","196"],H:["78","179","211"],I:["67","162","202"],J:["43","140","190"],K:["8","104","172"],L:["8","88","158"],M:["8","64","129"]},BuGn:{A:["247","252","253"],B:["237","248","251"],C:["229","245","249"],D:["204","236","230"],E:["178","226","226"],F:["153","216","201"],G:["102","194","164"],H:["65","174","118"],I:["44","162","95"],J:["35","139","69"],K:["0","109","44"],L:["0","88","36"],M:["0","68","27"]},PuBuGn:{A:["255","247","251"],B:["246","239","247"],C:["236","226","240"],D:["208","209","230"],E:["189","201","225"],F:["166","189","219"],G:["103","169","207"],H:["54","144","192"],I:["28","144","153"],J:["2","129","138"],K:["1","108","89"],L:["1","100","80"],M:["1","70","54"]},PuBu:{A:["255","247","251"],B:["241","238","246"],C:["236","231","242"],D:["208","209","230"],E:["189","201","225"],F:["166","189","219"],G:["116","169","207"],H:["54","144","192"],I:["43","140","190"],J:["5","112","176"],K:["4","90","141"],L:["3","78","123"],M:["2","56","88"]},BuPu:{A:["247","252","253"],B:["237","248","251"],C:["224","236","244"],D:["191","211","230"],E:["179","205","227"],F:["158","188","218"],G:["140","150","198"],H:["140","107","177"],I:["136","86","167"],J:["136","65","157"],K:["129","15","124"],L:["110","1","107"],M:["77","0","75"]},RdPu:{A:["255","247","243"],B:["254","235","226"],C:["253","224","221"],D:["252","197","192"],E:["251","180","185"],F:["250","159","181"],G:["247","104","161"],H:["221","52","151"],I:["197","27","138"],J:["174","1","126"],K:["122","1","119"],L:["122","1","119"],M:["73","0","106"]},PuRd:{A:["247","244","249"],B:["241","238","246"],C:["231","225","239"],D:["212","185","218"],E:["215","181","216"],F:["201","148","199"],G:["223","101","176"],H:["231","41","138"],I:["221","28","119"],J:["206","18","86"],K:["152","0","67"],L:["145","0","63"],M:["103","0","31"]},OrRd:{A:["255","247","236"],B:["254","240","217"],C:["254","232","200"],D:["253","212","158"],E:["253","204","138"],F:["253","187","132"],G:["252","141","89"],H:["239","101","72"],I:["227","74","51"],J:["215","48","31"],K:["179","0","0"],L:["153","0","0"],M:["127","0","0"]},YlOrRd:{A:["255","255","204"],B:["255","255","178"],C:["255","237","160"],D:["254","217","118"],E:["254","204","92"],F:["254","178","76"],G:["253","141","60"],H:["252","78","42"],I:["240","59","32"],J:["227","26","28"],K:["189","0","38"],L:["177","0","38"],M:["128","0","38"]},YlOrBr:{A:["255","255","229"],B:["255","255","212"],C:["255","247","188"],D:["254","227","145"],E:["254","217","142"],F:["254","196","79"],G:["254","153","41"],H:["236","112","20"],I:["217","95","14"],J:["204","76","2"],K:["153","52","4"],L:["140","45","4"],M:["102","37","6"]},Purples:{A:["252","251","253"],B:["242","240","247"],C:["239","237","245"],D:["218","218","235"],E:["203","201","226"],F:["188","189","220"],G:["158","154","200"],H:["128","125","186"],I:["117","107","177"],J:["106","81","163"],K:["84","39","143"],L:["74","20","134"],M:["63","0","125"]},Blues:{A:["247","251","255"],B:["239","243","255"],C:["222","235","247"],D:["198","219","239"],E:["189","215","231"],F:["158","202","225"],G:["107","174","214"],H:["66","146","198"],I:["49","130","189"],J:["33","113","181"],K:["8","81","156"],L:["8","69","148"],M:["8","48","107"]},Greens:{A:["247","252","245"],B:["237","248","233"],C:["229","245","224"],D:["199","233","192"],E:["186","228","179"],F:["161","217","155"],G:["116","196","118"],H:["65","171","93"],I:["49","163","84"],J:["35","139","69"],K:["0","109","44"],L:["0","90","50"],M:["0","68","27"]},Oranges:{A:["255","245\t","235"],B:["254","237","222"],C:["254","230","206"],D:["253","208","162"],E:["253","190","133"],F:["253","174","107"],G:["253","141","60"],H:["241","105","19"],I:["230","85","13"],J:["217","72","1"],K:["166","54","3"],L:["140","45","4"],M:["127","39","4"]},Reds:{A:["255","245","240"],B:["254","229","217"],C:["254","224","210"],D:["252","187","161"],E:["252","174","145"],F:["252","146","114"],G:["251","106","74"],H:["239","59","44"],I:["222","45","38"],J:["203","24","29"],K:["165","15","21"],L:["153","0","13"],M:["103","0","13"]},Greys:{A:["255","255","255"],B:["247","247","247"],C:["240","240","240"],D:["217","217","217"],E:["204","204","204"],F:["189","189","189"],G:["150","150","150"],H:["115","115","115"],I:["99","99","99"],J:["82","82","82"],K:["37","37","37"],L:["37","37","37"],M:["0","0","0"]}}},diverging:{classBreakSets:{3:"EHK",4:"CFJM",5:"CFHJM",6:"BEGIKN",7:"BEGHIKN",8:"BDFGIJLN",9:"BDFGHIJLN",10:"ABDFGIJLNO",11:"ABDFGHIJLNO"},colorRamps:{PuOr:{A:["127","59","8"],B:["179","88","6"],C:["230","97","1"],D:["224","130","20"],E:["241","163","64"],F:["253","184","99"],G:["254","224","182"],H:["247","247","247"],I:["216","218","235"],J:["178","171","210"],K:["153","142","195"],L:["128","115","172"],M:["94","60","153"],N:["84","39","136"],O:["45","0","75"]},BrBG:{A:["84","48","5"],B:["140","81","10"],C:["166","97","26"],D:["191","129","45"],E:["216","179","101"],F:["223","194","125"],G:["246","232","195"],H:["245","245","245"],I:["199","234","229"],J:["128","205","193"],K:["90","180","172"],L:["53","151","143"],M:["1","133","113"],N:["1","102","94"],O:["0","60","48"]},PRGn:{A:["64","0","75"],B:["118","42","131"],C:["123","50","148"],D:["153","112","171"],E:["175","141","195"],F:["194","165","207"],G:["231","212","232"],H:["247","247","247"],I:["217","240","211"],J:["166","219","160"],K:["127","191","123"],L:["90","174","97"],M:["0","136","55"],N:["27","120","55"],O:["0","68","27"]},PiYG:{A:["142","1","82"],B:["197","27","125"],C:["208","28","139"],D:["222","119","174"],E:["233","163","201"],F:["241","182","218"],G:["253","224","239"],H:["247","247","247"],I:["230","245","208"],J:["184","225","134"],K:["161","215","106"],L:["127","188","65"],M:["77","172","38"],N:["77","146","33"],O:["39","100","25"]},RdBu:{A:["103","0","31"],B:["178","24","43"],C:["202","0","32"],D:["214","96","77"],E:["239","138","98"],F:["244","165","130"],G:["253","219","199"],H:["247","247","247"],I:["209","229","240"],J:["146","197","222"],K:["103","169","207"],L:["67","147","195"],M:["5","113","176"],N:["33","102","172"],O:["5","48","97"]},RdGy:{A:["103","0","31"],B:["178","24","43"],C:["202","0","32"],D:["214","96","77"],E:["239","138","98"],F:["244","165","130"],G:["253","219","199"],H:["255","255","255"],I:["224","224","224"],J:["186","186","186"],K:["153","153","153"],L:["135","135","135"],M:["64","64","64"],N:["77","77","77"],O:["26","26","26"]},RdYlBu:{A:["165","0","38"],B:["215","48","39"],C:["215","25","28"],D:["244","109","67"],E:["252","141","89"],F:["253","174","97"],G:["254","224","144"],H:["255","255","191"],I:["224","243","248"],J:["171","217","233"],K:["145","191","219"],L:["116","173","209"],M:["44","123","182"],N:["69","117","180"],O:["49","54","149"]},Spectral:{A:["158","1","66"],B:["213","62","79"],C:["215","25","28"],D:["244","109","67"],E:["252","141","89"],F:["253","174","97"],G:["254","224","139"],H:["255","255","191"],I:["230","245","152"],J:["171","221","164"],K:["153","213","148"],L:["102","194","165"],M:["43","131","186"],N:["50","136","189"],O:["94","79","162"]},RdYlGn:{A:["165","0","38"],B:["215","48","39"],C:["215","25","28"],D:["244","109","67"],E:["252","141","89"],F:["253","174","97"],G:["254","224","139"],H:["255","255","191"],I:["217","239","139"],J:["166","217","106"],K:["145","207","96"],L:["102","189","99"],M:["26","150","65"],N:["26","152","80"],O:["0","104","55"]}}}}}),define("magcore/utils/formatter",[],function(){return Number.prototype.MagFormat=function(){return this.toFixed(1)},{qs:function(e){e=e.replace(/[*+?^$.\[\]{}()|\\\/]/g,"\\$&");var t=location.search.match(new RegExp("[?&]"+e+"=([^&]+)(&|$)"));return t&&decodeURIComponent(t[1].replace(/\+/g," "))},numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},chartTooltip:function(e,t){return`${this.numberWithCommas(e)} <r> ${t}`},valueAxisTemplate:function(e){return this.numberWithCommas(e)},wrapText:function(e){var t="",r=0;if(e.length>=12){var n=e.split(" ");$.each(n,function(e,n){var a=" ";r>=12&&(a="\n",r=0),t+=a+n,r+=n.length})}else t=e;return t},showInThousands:function(e){console.log(e)},pctLabel:function(e){return(Math.round(1e3*e)/10).toLocaleString("en-US")},numLabel:function(e){return Math.round(e).toLocaleString("en-US")}}}),define("magcore/utils/charts",["magcore/utils/formatter"],function(e){return{createChartParams:function(t,r){let n=[{field:"fieldValue",categoryField:"fieldAlias",type:t.compareData?"bar":t.type,gap:.5,data:t.data,name:t.names?t.names[0]:void 0}];return t.compareData&&n.push({field:"fieldValue",categoryField:"fieldAlias",type:"bar",gap:.5,data:t.compareData,name:t.names?t.names[1]:void 0}),{seriesColors:r,legend:{position:"bottom",labels:{color:"black"}},series:n,seriesDefaults:{labels:{position:"outsideEnd",background:"#4D4D4D",format:"{0:n}",color:"black",template:'#= kendo.format(" {0:P}", percentage) #'},tooltip:{visible:!0,template:function(t){return e.chartTooltip(t.value,t.category)+" <br> "+kendo.format("{0:P}",t.percentage)}}},chartArea:{background:"#fafafa"},categoryAxis:{field:"fieldAlias",color:"black",labels:{visible:!0,rotation:{angle:"column"===t.type?45:0},template:function(t){return e.wrapText(t.value)}},majorGridLines:{visible:!1},line:{visible:!1}},valueAxis:{color:"black",labels:{template:function(t){return e.valueAxisTemplate(t.value)},step:2}}}},getCategories:function(e){return e.reduce((e,t)=>(e.includes(t.chartCategory)||""===t.chartCategory||e.push(t.chartCategory),e),[])}}}),define("magcore/utils/data",["esri/tasks/QueryTask"],function(e){return{query:async function(t,r={where:"1=1",outFields:["OBJECTID","GEOID","NAME"],returnGeometry:!1,distinct:!0,orderByFields:"NAME"},{attributesOnly:n,countOnly:a}={attributesOnly:!1,countOnly:!1}){let o;if("function"==typeof t.queryFeatures)o=!0===a?await t.queryFeatureCount(r):await t.queryFeatures(r);else{if("string"!=typeof t)throw new TypeError(`Invalid parameter for querying data: ${t}`);{let n=new e(t);o=!0===a?await n.executeForCount(r):await n.execute(r)}}return"number"==typeof o?o:!0===n?o.features.map(e=>e.attributes):o}}}),define("magcore/utils/reports",["./data"],function(e){var t={};return{getSelectedReport:function(){return t},getReportData:async function(r,n,a=[],o){let i="1=1";a&&a.length>0&&(i=`GEOID IN(${a.map(e=>`'${e}'`).join(",")})`);let u={returnGeometry:!0,outFields:["*"],where:i,geometry:o||null,orderByFields:["GEOID"]},l=e.query(r+"/"+n.ACSIndex,u);u.returnGeometry=!1;let s=e.query(r+"/"+n.CensusIndex,u),[c,d]=await Promise.all([l,s]);return t={options:n,acsData:c,censusData:d},Object.assign({},this.getSelectedReport())}}}),define("magcore/utils/application",[],function(){function e(e){var t=e.toString(16);return 1===t.length?"0"+t:t}return{showLoading:function(e,t){$(e).addClass(`d-${t||"flex"}`)},hideLoading:function(e){$(e).removeClass((e,t)=>(t.match(/\bd-\S+/g)||[]).join(" ")),$(e).addClass("d-none")},hexToRgb:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,r,n){return t+t+r+r+n+n});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null},rgbToHex:function(t,r,n){return"#"+e(t)+e(r)+e(n)}}});